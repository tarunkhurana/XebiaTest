"use strict";angular.module("shoppingCart",["ngRoute"]).run(["$route","$rootScope","$location",function(){}]).config(["$routeProvider",function(e){e.when("/store",{templateUrl:"app/views/pages/store/store.html",controller:"storeCtrl",resolve:{store:["StoreService",function(e){return e.store}],cart:["CartService",function(e){return e.cart}]}}).when("/product/:productid",{templateUrl:"app/views/pages/product/product.html",controller:"productCtrl"}).when("/cart",{templateUrl:"app/views/pages/cart/cart.html",controller:"cartCtrl"}).otherwise({redirectTo:"/store"})}]),angular.module("shoppingCart").controller("storeCtrl",["$rootScope","$scope","store","cart",function(e,t,a,r){var o=function(){t.store=a,t.cart=r};o()}]),angular.module("shoppingCart").controller("cartCtrl",["$rootScope","$scope","CartService",function(e,t,a){var r=function(){t.cart=a.cart};r()}]),angular.module("shoppingCart").controller("productCtrl",["$rootScope","$scope","$routeParams","StoreService","CartService",function(e,t,a,r,o){var i=r.store,c=function(){t.product=i.getProduct(a.productid),t.cart=o.cart};c()}]),angular.module("shoppingCart").factory("StoreService",["CartProductService",function(e){var t=e.product,a=function(){this.products=[new t(1,"Apple","Eat one every day to keep the doctor away!",12,1,90,[{calName:"cartenoid",calType:"Neglegible"},{calName:"Fiber",calType:"Average"},{calName:"Folates",calType:"Low"},{calName:"Potassium",calType:"Neglegible"},{calName:"Vitamin C",calType:"Average"}]),new t(2,"Grapefruit","Pink or red, always healthy and delicious.",16,1,120,[{calName:"cartenoid",calType:"Neglegible"},{calName:"Fiber",calType:"Average"},{calName:"Folates",calType:"Low"},{calName:"Potassium",calType:"Neglegible"},{calName:"Vitamin C",calType:"Average"}]),new t(3,"Grape","Wine is great, but grapes are even better.",20,1,50,[{calName:"cartenoid",calType:"Neglegible"},{calName:"Fiber",calType:"Average"},{calName:"Folates",calType:"Low"},{calName:"Potassium",calType:"Neglegible"},{calName:"Vitamin C",calType:"Average"}]),new t(4,"Papaya","Super-popular for breakfast.",8,1,70,[{calName:"cartenoid",calType:"Neglegible"},{calName:"Fiber",calType:"Average"},{calName:"Folates",calType:"Low"},{calName:"Potassium",calType:"Neglegible"},{calName:"Vitamin C",calType:"Average"}]),new t(5,"Pineapple","Enjoy it (but don't forget to peel first).",10,1,80,[{calName:"cartenoid",calType:"Neglegible"},{calName:"Fiber",calType:"Average"},{calName:"Folates",calType:"Low"},{calName:"Potassium",calType:"Neglegible"},{calName:"Vitamin C",calType:"Average"}])]};a.prototype.getProduct=function(e){for(var t=0;t<this.products.length;t++)if(this.products[t].id==e)return this.products[t];return null};var r=new a;return{store:r}}]),angular.module("shoppingCart").factory("CartService",["CartProductService",function(e){var t=function(){this.items=[],this.cartName="shopping-cart"},a=e.cartItem;t.prototype.loadItems=function(){var e=null!=localStorage?localStorage[this.cartName+"_items"]:null;if(null!=e)for(var e=JSON.parse(e),t=0;t<e.length;t++){var r=e[t];r=new a(r.id,r.name,r.price,r.qty),this.items.push(r)}},t.prototype.saveItems=function(){null!=localStorage&&(localStorage[this.cartName+"_items"]=JSON.stringify(this.items))},t.prototype.addItem=function(e,t,r,o){if(0!=o){var i=!1;if(!i)for(var c=0;c<this.items.length;c++){var l=this.items[c];l.id==e&&(i=!0,l.qty=Number(l.qty+o),l.qty<=0&&this.items.splice(c,1))}}if(!i){var l=new a(e,t,r,o);this.items.push(l)}this.saveItems()},t.prototype.getTotalPrice=function(){for(var e=0,t=0;t<this.items.length;t++){var a=this.items[t];e+=Number(a.qty*a.price)}return e},t.prototype.getTotalCount=function(){for(var e=0,t=0;t<this.items.length;t++){var a=this.items[t];e+=Number(a.qty)}return e},t.prototype.clearItems=function(){this.items=[],this.saveItems()};var r=new t;return r.loadItems(),{cart:r}}]),angular.module("shoppingCart").factory("CartProductService",function(){var e=function(e,t,a,r){this.id=e,this.name=t,this.price=a,this.qty=r},t=function(e,t,a,r,o,i,c){this.id=e,this.name=t,this.description=a,this.price=r,this.cal=i,this.calories=c,this.qty=o};return{product:t,cartItem:e}}),angular.module("shoppingCart").directive("searchModel",function(){return{restrict:"EA",transclude:!0,template:'<ng-transclude></ng-transclude><a id="search-btn" href="" ng-click="toggleSearch(true);"><i class="glyphicon glyphicon-search"</a>',link:function(e,t){var a=t.find("#search"),r=t.find("#search-btn");a.blur(function(){e.toggleSearch(!1)}),e.toggleSearch=function(e){1==e?(r.hide(),a.show().css({padding:"10px",border:"1px solid lightgrey"}).animate({width:"180px"},500)):a.animate({width:"0",padding:"0",border:"0"},500).hide(0,function(){r.show()})}}}});